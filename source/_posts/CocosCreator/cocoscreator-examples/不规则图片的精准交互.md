---
title: 不规则图片的精准交互
date: 2024-06-25 13:30:49
categories:
  - [CocosCreator, cocoscreator-examples]
tags:
---
常见的输入事件就不多说了，一般都是规则的矩形框，包括图片。

假设一个图片节点，我们在点击它时只想它的某一部分（不规则）响应，其他位置不响应；或者该图片的透明区域不响应；

查了一些资料，大都是通过判断位置所在的像素点的阈值来决定响应还是不响应。文章洋洋洒洒老长一篇，没有看下去的欲望。由于对图形这块没了解，也暂时没时间去学习这方面的知识，就想着找找看有没有捷径。没错，下面就是我找到的捷径：
![](001.png)

这个隐藏在2D物理系统中的API辅助类提供了很多用于测试形状与形状是否相交的方法。其中就包括测试点在多边形内的方法

**pointInPolygon static**
结合polygonCollider2D，可以很好的解决上面提出的问题。

假设我们有这么个图片： 
![](002.png)
只要是透明的地方，我们点击都不想让它有响应，只有点击到（颜色）金币时才会有响应。 
![](003.png)
我们在该节点上给它添加一个polygonCollider2D组件，组件上会自动生成一个多边形的bound数组（当然也可以自定义编辑）。

然后我们就在该节点上添加一个脚本用于测试：
![](004.png)
附上代码： 
![](005.png)
测试点击相当精确哈。。。

目前没法去和像素检测的方法做对比来说明哪个性能好、消耗少。

暂时够用，后面如果学习了怎么用像素点检测了再拿来做对比。

pointInPolygon是一个悄咪咪的API，它还有其他一些包括矩形与多边形是否相交、测试矩形与圆形是否相交、测试多边形与多边形是否相交等等；但很遗憾在官方的文档中没有被提到。 
bilibili:https://www.bilibili.com/read/cv27908195/